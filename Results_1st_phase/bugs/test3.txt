Замечено что, если в пути до исходных кодов программы есть символы из кириллицы, тогда код, помеченный как gfx_kernel, исполняется на cpu. Предполагаю, что это связано с тем, что gfx линкер некорректно интепретировал полученный путь. В файле, полученном в результате сборки, с помощью dumpbin не было обнаружено gfx секций.

// Тест можно запустить с помощью icl без дополнительных ключей